name: Building and testing library
run-name: Building and testing library
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          submodules: true
      - name: Build devcontainer image
        run: docker build -f .devcontainer/Dockerfile -t hydrolib-ci:latest .
      - name: Build and test inside container
        run: |
          docker run --rm \
            -v "${{ github.workspace }}:/workspace" \
            -w /workspace \
            --user "$(id -u):$(id -g)" \
            hydrolib-ci:latest \
            bash -lc "cmake --preset Debug && cmake --build ./build"